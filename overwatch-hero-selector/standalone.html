<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overwatch Hero Selector</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            height: 100vh;
            width: 100vw;
            background-image: url("https://raw.githubusercontent.com/ParkYoungWoong/overwatch-hero-selector-vanilla/master/images/bg.jpg");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            position: relative;
        }

        /* 웰컴 스크린 */
        .welcome-screen {
            text-align: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .welcome-logo {
            max-width: 400px;
            margin: 0 auto 30px auto;
        }

        .welcome-logo img {
            width: 100%;
            height: auto;
        }

        .btn {
            padding: 15px 30px;
            font-size: 1.2rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
        }

        .btn-primary {
            background-color: #f99e1a;
            color: white;
            margin-top: 20px;
        }

        .btn-primary:hover {
            background-color: #ff9c00;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(249, 158, 26, 0.6);
        }

        .btn-back {
            background-color: #43484c;
            color: white;
            margin-top: 20px;
            padding: 12px 24px;
            font-size: 1rem;
        }

        .btn-back:hover {
            background-color: #5a6269;
            transform: translateX(-3px);
            box-shadow: 0 0 10px rgba(67, 72, 76, 0.6);
        }

        .btn-back::before {
            content: '← ';
            margin-right: 5px;
        }

        /* 히어로 그리드 스크린 */
        .heroes-screen {
            display: none;
        }

        .heroes-screen.active {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .hero-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 660px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .hero-card {
            width: 80px;
            height: 84px;
            margin: 4px;
            border: 3px solid #fff;
            border-radius: 10px;
            box-sizing: border-box;
            overflow: hidden;
            background-color: #555;
            transform: skewX(-14deg);
            transition: transform .1s, background-color .6s;
            cursor: pointer;
            position: relative;
        }

        .hero-card:hover {
            background-color: #ff9c00;
            transform: skewX(-14deg) scale(1.3);
            z-index: 1;
        }

        .hero-card-inner {
            width: 140%;
            height: 100%;
            transform: translateX(-16px) skewX(14deg);
            background-position: center;
            background-repeat: no-repeat;
            background-size: 90px;
        }

        .hero-card.loading .hero-card-inner {
            background-color: #555;
        }

        .hero-card.error {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 0.8rem;
        }

        .logo-container {
            text-align: center;
            margin-top: 0;
        }

        .logo-container img {
            max-width: 300px;
            width: 100%;
            height: auto;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 웰컴 스크린 -->
        <div class="welcome-screen" id="welcomeScreen">
            <div class="welcome-logo">
                <img 
                    src="https://raw.githubusercontent.com/ParkYoungWoong/overwatch-hero-selector-vanilla/master/images/logo_overwatch.png"  
                    alt="Overwatch">
            </div>
            <button class="btn btn-primary" onclick="showHeroes()">
                히어로즈 이미지 보기
            </button>
        </div>

        <!-- 히어로 그리드 스크린 -->
        <div class="heroes-screen" id="heroesScreen">
            <div class="hero-grid" id="heroGrid">
                <!-- 히어로 카드들이 여기에 동적으로 추가됩니다 -->
            </div>
            <div class="logo-container">
                <img 
                    src="https://raw.githubusercontent.com/ParkYoungWoong/overwatch-hero-selector-vanilla/master/images/logo_overwatch.png"  
                    alt="Overwatch">
            </div>
            <div style="text-align: center;">
                <button class="btn btn-back" onclick="showWelcome()">
                    돌아가기
                </button>
            </div>
        </div>
    </div>

    <script>
        const API_BASE_URL = 'http://localhost:8000/api';
        const TOTAL_HEROES = 32;

        // 히어로 그리드 생성
        async function loadHeroes() {
            const heroGrid = document.getElementById('heroGrid');
            heroGrid.innerHTML = ''; // 초기화

            // 먼저 로딩 카드들 생성
            for (let i = 1; i <= TOTAL_HEROES; i++) {
                const card = document.createElement('div');
                card.className = 'hero-card loading';
                card.id = `hero-${i}`;
                heroGrid.appendChild(card);
            }

            // 이미지 로드
            for (let i = 1; i <= TOTAL_HEROES; i++) {
                loadHeroImage(i);
            }
        }

        // 개별 히어로 이미지 로드
        function loadHeroImage(heroId) {
            const card = document.getElementById(`hero-${heroId}`);
            
            // 첫 번째와 두 번째 히어로는 GitHub에서, 나머지는 API에서 가져오기
            let imageUrl;
            if (heroId === 1) {
                imageUrl = 'https://raw.githubusercontent.com/LUENAH888/overwatch_server_v1/main/media/heroes/Icon-Ana.png';
            } else if (heroId === 2) {
                imageUrl = 'https://raw.githubusercontent.com/LUENAH888/overwatch_server_v1/main/media/heroes/Icon-ashe.png';
            } else if (heroId === 3) {
                imageUrl = 'https://raw.githubusercontent.com/LUENAH888/overwatch_server_v1/main/media/heroes/Icon-Baptiste.png';
            } else {
                imageUrl = `${API_BASE_URL}/heroes/${heroId}/image/`;
            }
            
            // 이미지 로드 확인
            const img = new Image();
            
            img.onload = function() {
                card.className = 'hero-card';
                card.innerHTML = `<div class="hero-card-inner" style="background-image: url('${imageUrl}');"></div>`;
            };

            img.onerror = function() {
                card.className = 'hero-card error';
                card.innerHTML = '❌';
            };

            img.src = imageUrl;
        }

        // 화면 전환
        function showHeroes() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('heroesScreen').classList.add('active');
            loadHeroes();
        }

        function showWelcome() {
            document.getElementById('heroesScreen').classList.remove('active');
            document.getElementById('welcomeScreen').classList.remove('hidden');
        }
    </script>
</body>
</html>

